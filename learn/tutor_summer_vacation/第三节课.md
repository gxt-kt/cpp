# ç¬¬ä¸‰èŠ‚è¯¾



#### è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—

**é¢˜ç›®ï¼š**

![image-20230628144751156](https://raw.githubusercontent.com/gxt-kt/picgo_pictures/master/image-20230628144751156.png)

**ä»£ç ï¼š**

```cpp
int Fibonacci(int n);

int fibonacci[1000] = {0};

int main() { 
  TIME_BEGIN(fibonacci);
  cout << Fibonacci(30) << endl;
  TIME_END(fibonacci);
}

// é€’å½’å‡½æ•°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ n ä¸ªæ•°å­—
int Fibonacci(int n) {
  if (n <= 1) {
    return n;
  } else {
    if(fibonacci[n]!=0) return fibonacci[n];
    fibonacci[n]=Fibonacci(n - 1) + Fibonacci(n - 2);
    return fibonacci[n];
  }
}
```

å…¶ä¸­æ¶‰åŠåˆ°å‡ ä¸ªç‚¹ï¼š

- ä½¿ç”¨å‡½æ•°é€’å½’è®¡ç®—å…·ä½“çš„å€¼
  - ä½†æ˜¯è¿™æ ·ä¼šæœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹ï¼šå®ƒä¼šé‡å¤è®¡ç®—å¾ˆå¤šå€¼ï¼Œæœ‰ç‚¹ç±»ä¼¼äºåˆ†å‰æ•°ï¼Œæ— é™å¾€ä¸‹è®¡ç®—
  - å¯¹äºè¿™ä¸ªç¼ºç‚¹ï¼Œå¯ä»¥æå‰å®šä¹‰å¥½ä¸€ä¸ªæ•°ç»„ï¼Œä¿å­˜è®¡ç®—ä¸‹æ¥çš„å€¼
- å¯ä»¥ä½¿ç”¨ä¸ŠèŠ‚è¯¾è¯´çš„ï¼ŒTIME_BEGINå’ŒTIME_ENDè®¡ç®—ä»£ç æ‰§è¡Œæ—¶é—´ï¼Œåˆ¤æ–­ä½ æ‰€æ”¹è¿›çš„æ˜¯å¦å®é™…æœ‰æ•ˆ
- åœ¨ä»£ç æ”¹è¿›çš„å†…å®¹é‡Œï¼Œå¯ä»¥ç”¨åˆ°`static`å°†å˜é‡æ”¾åˆ°å‡½æ•°å±€éƒ¨å†…

***

#### staticå…³é”®å­—çš„ä½¿ç”¨

**é»˜è®¤å‡½æ•°ä¸­å®šä¹‰å˜é‡æ˜¯æ¯æ¬¡æ‰§è¡Œè¿™ä¸ªå‡½æ•°éƒ½ä¼šåˆ·æ–°ï¼Œä½¿ç”¨staticå…³é”®å­—åï¼Œæ¯æ¬¡æ‰§è¡Œå‡½æ•°æ—¶å˜é‡ä¸å†è¢«åˆå§‹åŒ–ï¼Œè€Œæ˜¯ä¿ç•™äº†ä¸Šæ¬¡çš„å€¼**

ç¤ºä¾‹ï¼š

```cpp
void Test() {
  int a=0;
  a++;
  cout << VAR(a) << endl;
}

int main() { 
  Test();
  Test();
  Test();
}
```

ä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºå°±æ˜¯æ¯æ¬¡éƒ½æ˜¯`a=1`

å¦‚æœå¯¹Testå‡½æ•°ä¸­çš„aå˜é‡åŠ ä¸Šå…³é”®å­—`static`å‘¢

ç¤ºä¾‹ï¼š

```cpp
void Test() {
  static int a=0;
  a++;
  cout << VAR(a) << endl;
}

int main() { 
  Test();
  Test();
  Test();
}
```

é‚£ä¹ˆè¾“å‡ºç»“æœå°±ä¼šå‘ç”Ÿå˜åŒ–ï¼š

```cpp
a=1
a=2
a=3
```

***

#### å‡½æ•°é‡è½½ï¼ˆCè¯­è¨€ä¸æ”¯æŒï¼‰

å½“åœ¨ C++ ä¸­å®šä¹‰å¤šä¸ªåŒåå‡½æ•°ï¼Œä½†å‚æ•°åˆ—è¡¨ä¸åŒçš„æƒ…å†µä¸‹ï¼Œå°±ä¼šä½¿ç”¨åˆ°å‡½æ•°é‡è½½ã€‚å‡½æ•°é‡è½½å…è®¸æˆ‘ä»¬æ ¹æ®å‡½æ•°çš„å‚æ•°ç±»å‹å’Œæ•°é‡æ¥è°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ çµæ´»ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚é€‰æ‹©ä¸åŒçš„å‡½æ•°å®ç°ã€‚



æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªMAXçš„åŒåï¼Œè®©å®ƒæ—¢å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªintç±»å‹ï¼Œä¹Ÿå¯ä»¥æ¯”è¾ƒä¸¤ä¸ªfloat/doubleç±»å‹

```cpp
int Max(int a,int b) {
  return a>b?a:b;
}

float Max(float a,float b) {
  return a>b?a:b;
}
```

è¿™é‡Œçš„å‡½æ•°åéƒ½å¯ä»¥ä½¿ç”¨Maxï¼Œç¼–è¯‘å™¨åŒºåˆ†å®ƒä»¬å°±æ˜¯é çš„æ˜¯è¾“å…¥å‚æ•°çš„ä¸åŒ



> ğŸ¤”å¦‚æœè¾“å…¥å‚æ•°ç›¸åŒï¼Œä½†æ˜¯è¿”å›å€¼ç±»å‹ä¸åŒï¼Œç¼–è¯‘å™¨è¿˜èƒ½åŒºåˆ†å®ƒä»¬å—ï¼Ÿ
>
> ç­”æ¡ˆæ˜¯ä¸èƒ½ï¼Œå› ä¸ºå‡½æ•°çš„è¿”å›å€¼ä½ å¯ä»¥ä¸ä½¿ç”¨ï¼Œç¼–è¯‘å™¨ä¹Ÿå°±æ— æ³•ä¾é ä½ å†™çš„ä»£ç åˆ¤æ–­åˆ°åº•è°ƒç”¨å“ªä¸€ä¸ªå‡½æ•°äº†
>
> ä¾‹å¦‚ï¼š
>
> ```cpp
> int Demo(int a) {
>   return 1;
> }
> 
> float Demo(int a) {
>   return 1.0f;
> }
> ```
>
> è¿™æ ·å†™å°±æ˜¯æœ‰é—®é¢˜çš„ï¼Œ**ç¼–è¯‘å™¨ä¼šæç¤ºFunctions that differ only in their return type cannot be overloaded**

***

#### å‡½æ•°çš„é»˜è®¤å‚æ•°

å‡½æ•°çš„é»˜è®¤å‚æ•°å…è®¸æˆ‘ä»¬åœ¨å‡½æ•°å®šä¹‰æ—¶ä¸ºæŸäº›å‚æ•°æä¾›é»˜è®¤å€¼ã€‚

è¿™æ„å‘³ç€åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚æœæ²¡æœ‰æä¾›å¯¹åº”çš„å‚æ•°å€¼ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ä½œä¸ºå‚æ•°çš„å€¼ã€‚

é»˜è®¤å‚æ•°ä½¿å¾—å‡½æ•°è°ƒç”¨æ›´åŠ çµæ´»ï¼Œå¯ä»¥çœç•¥ä¸€äº›å¸¸ç”¨çš„å‚æ•°ï¼Œç®€åŒ–å‡½æ•°çš„ä½¿ç”¨ã€‚

**ç¤ºä¾‹ï¼š**

```cpp
void Print(const char* str="World") {
  cout << "Hello " << str << "!" << endl;
}

int main() { 
  Print();
  Print("Chengxin");
}
```

åœ¨è¿™é‡Œè°ƒç”¨Printå‡½æ•°æ—¶ï¼Œå¯ä»¥ä¸è¾“å…¥å‚æ•°ï¼Œé‚£ä¹ˆstré»˜è®¤å°±ä¸º`â€œWorldâ€`

å¦‚æœè¾“å…¥å‚æ•°ï¼Œstrå°±ç­‰äºä½ è¾“å…¥çš„é‚£ä¸ªå‚æ•°

***

ğŸ’¡é€šå¸¸å°†é»˜è®¤å‚æ•°æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ«å°¾ï¼Œä»¥é¿å…äº§ç”ŸäºŒä¹‰æ€§ã€‚

```cpp
int Add(int a,int b,int c=0,int d=0) {
  return a+b+c+d;
}

int main() { 
  cout << Add(10,20) << endl;
  cout << Add(10,20,30) << endl;
  cout << Add(10,20,30,40) << endl;
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå®ç°äº†ä¸€ä¸ªæ±‚å’Œå‡½æ•°çš„ä»£ç ï¼Œæœ€å¤šç»™å®šå››ä¸ªå‚æ•°ï¼Œå…¶ä¸­æœ€åä¸¤ä¸ªä¸ºé»˜è®¤å‚æ•°

å¦‚æœä¸æŠŠé»˜è®¤å‚æ•°æ”¾åˆ°å‚æ•°åˆ—è¡¨æœ«å°¾ï¼Œæ¯”å¦‚è¿™æ ·å†™ï¼š`int Add(int a,int b,int c=0,int d) `

**è¿™æ ·æ˜¯ä¸è¢«å…è®¸çš„ï¼Œå› ä¸ºè¿™æ ·ç¼–è¯‘å™¨å°±æ²¡æ³•å¯¹ç…§å‚æ•°é¡ºåºè¿›è¡Œé»˜è®¤å‚æ•°æŒ‡å®šäº†**

***

æˆ‘ä»¬è¿˜**å¯ä»¥åœ¨å‡½æ•°å£°æ˜å’Œå®šä¹‰ä¸­æŒ‡å®šé»˜è®¤å‚æ•°**ã€‚ğŸ’¡ç”Ÿ**å£°æ˜å’Œå®šä¹‰åªèƒ½åœ¨ä¸€ä¸ªåœ°æ–¹æŒ‡å®šé»˜è®¤å‚æ•°**ï¼Œä¸å¯ä»¥ä¸¤ä¸ªåœ°æ–¹åŒæ—¶æŒ‡å®šï¼ˆä¸ºäº†é¿å…äºŒä¹‰æ€§ï¼‰

```cpp
void Print(const char* str="World");

void Print(const char* str="World") {
  cout << "Hello " << str << "!" << endl;
}
```

è¿™é‡Œçš„ä»£ç å°±æ˜¯é”™è¯¯çš„ï¼Œä¸¤ä¸ªåœ°æ–¹åŒæ—¶å®šä¹‰äº†é»˜è®¤å‚æ•°ï¼Œä½ éœ€è¦åˆ æ‰å…¶ä¸­ä¸€ä¸ªé»˜è®¤å‚æ•°æ‰èƒ½é€šè¿‡ç¼–è¯‘

***

#### å‡½æ•°ä½¿ç”¨æ—¶ä¸€äº›å…¶å®ƒå°ç¢çŸ¥è¯†

1. å‡½æ•°çš„å ç”¨å‚æ•°

```cpp
// è°ƒç”¨æ—¶å¿…é¡»è¦ç»™ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªå‚æ•°åœ¨å‡½æ•°ä½“æ˜¯åŒ¿åçš„ï¼Œå°±ç®—ç»™ä½ ä¹Ÿç”¨ä¸äº†
void Test(int a,int) {
}
```

2. å‡½æ•°ä¼ å€¼æ—¶ä½¿ç”¨constå…³é”®å­—

```cpp
void Test(const int a) {
//  a=10;   //è¿™é‡Œæ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºaå¸¦æœ‰constå±æ€§
}
```

***

#### ä½¿ç”¨mainå‡½æ•°å¤„ç†è¾“å…¥å†…å®¹

```cpp
#include <iostream>
#include <string>

int main(int argc, char* argv[]) {
  // æ£€æŸ¥å‘½ä»¤è¡Œå‚æ•°æ•°é‡
  if (argc < 2) {
    std::cout << "è¯·è¾“å…¥å‘½ä»¤è¡Œå‚æ•°" << std::endl;
    return 1;
  }

  for(int i=1;i<argc;i++) {
    cout << argv[i] << endl;
  }
}
```

æˆ‘ä»¬ä½¿ç”¨ `main` å‡½æ•°æ¥å¤„ç†è¾“å…¥å†…å®¹ã€‚`main` å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°

- `argc` è¡¨ç¤ºå‘½ä»¤è¡Œå‚æ•°çš„æ•°é‡
- `argv` æ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆï¼Œå…¶ä¸­å­˜å‚¨äº†å‘½ä»¤è¡Œå‚æ•°çš„å®é™…å€¼ã€‚

ç¬¬ä¸€ä¸ªå‚æ•° `argv[0]` å­˜å‚¨çš„æ˜¯ç¨‹åºçš„åç§°ï¼Œè€Œåé¢çš„å‚æ•°æ‰æ˜¯æˆ‘ä»¬è¾“å…¥çš„å†…å®¹ã€‚

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨forå¾ªç¯å¾ªç¯æ‰“å°äº†è¾“å…¥å‚æ•°ï¼ŒğŸ’¡ä¸‹æ ‡ i æ˜¯ä»1å¼€å§‹è®¡ç®—çš„

***


## æŒ‡é’ˆçš„å¼ºåŒ–

#### æŒ‡é’ˆçš„æŒ‡é’ˆ

è€ƒéªŒä¸‹ä½ æ˜¯å¦çœŸçš„ç†è§£äº†æŒ‡é’ˆ


```cpp
int main(int argc, char *argv[]) {
  int a = 10;
  int *p = &a;
  int **pp = &p;

  cout << a << endl;
  cout << *p << endl;
  cout << **pp << endl;
}
```

å¯¹äºè¿™ç§å¤šå±‚æŒ‡å‘ï¼Œç”»å‡ºå†…å­˜ä¸­çš„å­˜å‚¨å†…å®¹å’ŒæŒ‡é’ˆæŒ‡å‘å›¾

***

#### å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡**<font color='red'>ï¼ˆéš¾éš¾éš¾ï¼Œå¥½å¥½ç†è§£ï¼‰</font>**

**å¸¸é‡æŒ‡é’ˆ**ï¼ˆconst pointerï¼‰å’Œ**æŒ‡é’ˆå¸¸é‡**ï¼ˆpointer to constantï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„æŒ‡é’ˆç±»å‹ã€‚

1. å¸¸é‡æŒ‡é’ˆï¼ˆconst pointerï¼‰ï¼š
   - å£°æ˜å½¢å¼ï¼š`const int* ptr;` æˆ– `int const* ptr;`
   
   - ä½œç”¨ï¼š`ptr` æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘çš„å€¼ä¸èƒ½é€šè¿‡æŒ‡é’ˆè¿›è¡Œä¿®æ”¹ï¼Œä½†æŒ‡é’ˆæœ¬èº«å¯ä»¥æŒ‡å‘å…¶ä»–åœ°å€ã€‚
   
   - ç¤ºä¾‹ï¼š
   
     ```cpp
     int value = 5;
     const int* ptr = &value; // ptr æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ
     *ptr = 10; // é”™è¯¯ï¼šæ— æ³•é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼
     ptr = nullptr; // æ­£ç¡®ï¼šå¯ä»¥ä¿®æ”¹æŒ‡é’ˆæœ¬èº«
     ```

2. æŒ‡é’ˆå¸¸é‡ï¼ˆpointer to constantï¼‰ï¼š

   - å£°æ˜å½¢å¼ï¼š`int* const ptr;`

   - ä½œç”¨ï¼š`ptr` æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘çš„åœ°å€ä¸å¯æ›´æ”¹ï¼Œä½†å¯ä»¥é€šè¿‡æŒ‡é’ˆä¿®æ”¹è¯¥åœ°å€å¤„çš„å€¼ã€‚

   - ç¤ºä¾‹ï¼š

     ```cpp
     int value1 = 5, value2 = 10;
     int* const ptr = &value1; // ptr æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆ
     *ptr = 20; // æ­£ç¡®ï¼šé€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼
     ptr = &value2; // é”™è¯¯ï¼šæ— æ³•ä¿®æ”¹æŒ‡é’ˆæœ¬èº«æŒ‡å‘çš„åœ°å€
     ```

3. å¸¸é‡æŒ‡é’ˆå¸¸é‡ï¼ˆconstant pointer to constantï¼‰ï¼š

   - å£°æ˜å½¢å¼ä¸º `const int* const ptr;`ï¼Œ

   - ä½œç”¨ï¼šè¡¨ç¤ºæ—¢ä¸èƒ½é€šè¿‡æŒ‡é’ˆä¿®æ”¹æŒ‡å‘çš„å€¼ï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹æŒ‡é’ˆæœ¬èº«çš„æŒ‡å‘ã€‚

   - ç¤ºä¾‹ï¼š

     ```cpp
     int value1 = 5, value2 = 10;
     const int* const ptr = &value1; // ptr æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆ
     *ptr = 20; // é”™è¯¯ï¼šæ— æ³•é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼
     ptr = &value2; // é”™è¯¯ï¼šæ— æ³•ä¿®æ”¹æŒ‡é’ˆæœ¬èº«æŒ‡å‘çš„åœ°å€
     ```




><font color='red'>**ï¼ˆåŠ©è®°ï¼Œå¥½å¥½ç†è§£ï¼‰**</font>
>
>- æŒ‡é’ˆå¸¸é‡å’Œå¸¸é‡æŒ‡é’ˆæ€ä¹ˆåŒºåˆ†ï¼šæŒ‰ç…§constå’Œ*ä½ç½®é¡ºåºè¯»
>- constä¿®é¥°è°æ€ä¹ˆåŒºåˆ†ï¼šconstæ°¸è¿œä¿®é¥°å®ƒå·¦è¾¹æœ€ç›¸é‚»é‚£ä¸€ä¸ªï¼Œå¦‚æœå·¦è¾¹æ²¡æœ‰å†…å®¹ï¼Œå°±ä¼šä¿®é¥°å®ƒå³è¾¹é‚£ä¸ª



```cpp
void Test1() {
  int value1 = 1;
  int value2 = 2;
  int* ptr = &value1;

  *ptr = 10;      // æˆ‘è¦å»æ”¹ptræŒ‡å‘å†…å­˜å¯¹åº”çš„å€¼
  ptr = &value2;  // æˆ‘è¦ä¿®æ”¹ptræŒ‡å‘çš„å†…å®¹(ptrè‡ªèº«çš„å€¼)
}

void Test2() {
  int value1 = 1;
  int value2 = 2;
  const int* ptr = &value1;
  int const* ptr2 = &value1;

  // *ptr = 10;      // æˆ‘è¦å»æ”¹ptræŒ‡å‘å†…å­˜å¯¹åº”çš„å€¼
  ptr = &value2;  // æˆ‘è¦ä¿®æ”¹ptræŒ‡å‘çš„å†…å®¹(ptrè‡ªèº«çš„å€¼)
  
  // *ptr2 = 10;      // æˆ‘è¦å»æ”¹ptræŒ‡å‘å†…å­˜å¯¹åº”çš„å€¼
  ptr2 = &value2;  // æˆ‘è¦ä¿®æ”¹ptræŒ‡å‘çš„å†…å®¹(ptrè‡ªèº«çš„å€¼)
}

void Test3() {
  int value1 = 1;
  int value2 = 2;
  int* const ptr = &value1;

  *ptr = 10;      // æˆ‘è¦å»æ”¹ptræŒ‡å‘å†…å­˜å¯¹åº”çš„å€¼
  // ptr = &value2;  // æˆ‘è¦ä¿®æ”¹ptræŒ‡å‘çš„å†…å®¹(ptrè‡ªèº«çš„å€¼)
}

void Test4() {
  int value1 = 1;
  int value2 = 2;
  const int* const ptr = &value1;

  // *ptr = 10;      // æˆ‘è¦å»æ”¹ptræŒ‡å‘å†…å­˜å¯¹åº”çš„å€¼
  // ptr = &value2;  // æˆ‘è¦ä¿®æ”¹ptræŒ‡å‘çš„å†…å®¹(ptrè‡ªèº«çš„å€¼)
}
```

